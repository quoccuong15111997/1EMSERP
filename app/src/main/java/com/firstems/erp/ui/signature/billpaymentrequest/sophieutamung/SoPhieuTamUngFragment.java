package com.firstems.erp.ui.signature.billpaymentrequest.sophieutamung;import android.content.Intent;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.RadioButton;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.databinding.DataBindingUtil;import androidx.fragment.app.Fragment;import androidx.lifecycle.Observer;import androidx.lifecycle.ViewModelProviders;import androidx.recyclerview.widget.DividerItemDecoration;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import com.firstems.erp.R;import com.firstems.erp.adapter.PhieuTamUngNeuCoAdapter;import com.firstems.erp.api.model.response.doi_tuong_nhan.DoiTuongNhanItem;import com.firstems.erp.api.model.response.phieu_tam_ung.PhieuTamUngItem;import com.firstems.erp.callback.ServerCheckCallback;import com.firstems.erp.common.CommonFragment;import com.firstems.erp.common.Constant;import com.firstems.erp.ui.config.ConfigFragment;import java.util.ArrayList;import java.util.List;public class SoPhieuTamUngFragment extends CommonFragment {        private SoPhieuTamUngViewModel mViewModel;    private View root;    private RadioButton radAll, radSelected, radUnSelect;    private RecyclerView recyclerView;    private List<PhieuTamUngItem> phieuTamUngItems;    private PhieuTamUngNeuCoAdapter phieuTamUngNeuCoAdapter;    private String empCode="";        @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,                             @Nullable Bundle savedInstanceState) {        root = inflater.inflate(R.layout.so_phieu_tam_ung_fragment, container, false);        addControls();        addEvents();        return root;    }        private void addEvents() {        phieuTamUngNeuCoAdapter.setPhieuTamUngOnClickListener(new PhieuTamUngNeuCoAdapter.PhieuTamUngOnClickListener() {            @Override            public void onItemCheck(int position, PhieuTamUngItem phieuTamUngItem) {                for (int i =0;i<phieuTamUngItems.size();i++){                    phieuTamUngItems.get(i).setCheck(false);                }                phieuTamUngItems.get(position).setCheck(true);                recyclerView.post(new Runnable() {                    @Override                    public void run() {                        phieuTamUngNeuCoAdapter.notifyDataSetChanged();                    }                });            }        });            }        private void addControls() {        phieuTamUngItems = new ArrayList<>();        phieuTamUngNeuCoAdapter = new PhieuTamUngNeuCoAdapter(phieuTamUngItems);        recyclerView = root.findViewById(R.id.recycle);        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getContext());        linearLayoutManager.setOrientation(RecyclerView.VERTICAL);        DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(getContext(), linearLayoutManager.getOrientation());        recyclerView.addItemDecoration(dividerItemDecoration);        recyclerView.setLayoutManager(linearLayoutManager);        recyclerView.setAdapter(phieuTamUngNeuCoAdapter);            Intent intent = getActivity().getIntent();        DoiTuongNhanItem doiTuongNhanItem = (DoiTuongNhanItem) intent.getSerializableExtra(Constant.NAME_PUT_DOI_TUONG_NHAN);        empCode = doiTuongNhanItem.getiTEMCODE();    }        @Override    public void onActivityCreated(@Nullable Bundle savedInstanceState) {        super.onActivityCreated(savedInstanceState);        mViewModel = ViewModelProviders.of(this).get(SoPhieuTamUngViewModel.class);        mViewModel.setServerCheckCallback(new ServerCheckCallback() {            @Override            public void onServerLoadFail() {                showOutTOKEN();            }        });        mViewModel.loadData(empCode.split("\\*")[0]);        mViewModel.getLiveDataPhieuTamUng().observe(getViewLifecycleOwner(), new Observer<List<PhieuTamUngItem>>() {            @Override            public void onChanged(List<PhieuTamUngItem> list) {                phieuTamUngItems.addAll(list);                phieuTamUngNeuCoAdapter.notifyDataSetChanged();            }        });    }    }